import { useEffect, useRef } from 'react';

import { styled } from 'styled-components';

const CLOCK_DIAMETER = 480;

const ClockContainer = styled.div`
  width: 100%;
  height: 100%;
  border-radius: 50%;
  font-size: 24px;
  color: white;
  background: white;
  text-align: center;
`;

const RotationContainer = styled.div<{ $rotation?: number }>`
  position: absolute;
  top: 0px;
  left 0px;
  height: ${CLOCK_DIAMETER}px;
  width: ${CLOCK_DIAMETER}px;
  
  transform: ${(props) => `rotateZ(${props.$rotation}deg)`};

  display: flex;
  justify-content: center;
`;

export function BaristaClock() {
  const requestId = useRef<number>(-1);
  const outerRef = useRef(null);
  const innerRef = useRef(null);

  const animateTime = () => {
    if (!outerRef.current || !innerRef.current) {
      return;
    }
    const time = new Date();

    const secondRotation =
      (time.getSeconds() + time.getMilliseconds() / 1000) * 6;

    outerRef.current.style.transform = `rotate(${secondRotation}deg)`;
    innerRef.current.style.transform = `rotate(${-secondRotation}deg)`;

    requestId.current = requestAnimationFrame(animateTime);
  };

  useEffect(() => {
    requestId.current = requestAnimationFrame(animateTime);

    return () => {
      cancelAnimationFrame(requestId.current);
    };
  }, []);

  return (
    <ClockContainer>
      <RotationContainer ref={outerRef}>
        <BaristaLogoOuter />
      </RotationContainer>

      <RotationContainer ref={innerRef}>
        <BaristaLogoInner />
      </RotationContainer>
    </ClockContainer>
  );
}

const BaristaLogoOuter = () => (
  <svg
    version="1.0"
    xmlns="http://www.w3.org/2000/svg"
    width="480"
    height="480"
    viewBox="0 0 1200.000000 1200.000000"
    preserveAspectRatio="xMidYMid meet"
  >
    <g
      transform="translate(0.000000,1200.000000) scale(0.100000,-0.100000)"
      fill="#000"
      stroke="#000"
    >
      <path
        d="M5735 11853 c-38 -2 -151 -10 -250 -18 -1477 -128 -2850 -833 -3819
-1961 -846 -985 -1352 -2197 -1491 -3574 -8 -80 -20 -267 -26 -416 -22 -483
20 -882 141 -1352 398 -1540 1570 -2992 3033 -3757 646 -337 1353 -540 2137
-611 228 -21 804 -24 1025 -6 1456 122 2665 697 3710 1763 220 225 346 370
520 601 600 795 953 1653 1090 2653 64 470 68 1066 9 1545 -109 896 -428 1759
-927 2510 -236 354 -453 618 -756 920 -1166 1161 -2746 1773 -4396 1703z m603
-387 c52 -27 72 -69 72 -154 0 -78 -15 -126 -48 -156 l-21 -18 29 -30 c35 -35
44 -76 38 -171 -10 -152 -53 -187 -230 -187 -62 0 -119 4 -126 9 -11 7 -11 64
2 329 9 177 16 340 16 363 l0 41 118 -4 c85 -3 126 -9 150 -22z m-874 -13 c21
-72 185 -672 188 -688 3 -17 -4 -21 -52 -26 -30 -3 -58 -1 -61 4 -3 5 -12 33
-18 63 -14 59 -11 58 -98 48 -51 -7 -53 -8 -53 -38 0 -17 -3 -47 -6 -67 -6
-35 -9 -37 -52 -43 -25 -3 -49 -3 -52 1 -7 8 24 731 32 738 2 2 37 8 78 13 41
5 78 10 82 11 4 0 9 -7 12 -16z m1333 -26 c7 -8 13 -124 18 -374 l7 -363 -23
0 c-13 0 -41 3 -61 6 l-38 7 0 68 c0 59 -3 69 -17 69 -10 0 -41 3 -69 6 l-51
6 -17 -62 -18 -62 -49 4 c-27 3 -51 7 -54 10 -2 2 35 136 84 298 49 162 96
321 105 354 l17 59 77 -7 c42 -4 82 -12 89 -19z m-1633 -34 c11 -68 9 -71 -37
-78 -79 -12 -81 37 17 -485 14 -74 26 -138 26 -142 0 -5 -113 -29 -116 -24 0
0 -26 138 -57 305 -31 167 -59 306 -61 308 -1 2 -27 -2 -55 -8 -29 -6 -55 -8
-58 -5 -6 6 -25 98 -21 101 4 3 321 63 339 64 11 1 18 -10 23 -36z m1976 -22
c53 -12 111 -31 129 -42 44 -27 65 -79 56 -144 -13 -101 -27 -138 -70 -180
-41 -42 -41 -42 -23 -65 24 -30 23 -96 -2 -202 -11 -46 -20 -96 -20 -112 0
-25 -3 -28 -26 -22 -15 4 -40 10 -56 13 -16 3 -32 11 -34 17 -2 6 5 56 16 110
31 153 25 186 -40 189 l-33 2 -29 -130 c-15 -71 -30 -135 -32 -141 -5 -12 -93
0 -109 15 -6 6 128 647 149 710 2 7 10 11 17 8 6 -2 55 -14 107 -26z m-2461
-66 c16 -8 40 -28 54 -44 26 -31 53 -98 44 -107 -3 -3 -27 -11 -53 -18 l-48
-12 -21 40 c-23 47 -50 56 -85 28 -19 -16 -22 -24 -16 -55 10 -53 43 -86 137
-139 136 -76 189 -146 192 -253 2 -98 -73 -169 -178 -169 -88 0 -146 53 -171
156 -7 30 4 37 73 52 30 7 32 5 38 -26 12 -60 36 -79 86 -65 32 8 41 35 28 81
-12 43 -58 84 -148 131 -89 47 -145 106 -165 176 -21 68 -20 95 4 147 16 35
29 47 72 67 60 28 116 32 157 10z m2869 -36 c12 -5 22 -14 22 -22 0 -11 -180
-642 -195 -684 -3 -9 -17 -8 -57 3 -29 9 -54 17 -56 19 -2 2 155 560 194 688
6 19 35 17 92 -4z m-3130 -387 c61 -185 112 -342 112 -348 0 -9 -100 -47 -107
-40 -6 6 -233 690 -230 693 7 6 82 32 97 32 11 1 45 -88 128 -337z m3455 285
c59 -33 80 -75 75 -152 -5 -85 -13 -91 -76 -69 -46 17 -49 20 -41 42 17 44 11
71 -20 87 -28 14 -32 14 -56 -8 -47 -40 -45 -90 8 -204 51 -108 70 -179 61
-221 -27 -124 -93 -188 -184 -180 -107 10 -171 72 -169 162 1 55 20 121 35
121 5 -1 28 -7 52 -15 37 -11 42 -17 37 -34 -19 -64 -18 -93 6 -110 33 -23 54
-20 78 10 36 45 28 105 -25 213 -72 144 -70 244 4 333 52 61 133 71 215 25z
m-3792 -79 c22 -15 45 -46 67 -90 41 -84 51 -152 28 -196 -16 -31 -16 -32 3
-32 43 0 87 -56 131 -165 23 -58 46 -108 51 -111 18 -11 8 -22 -43 -43 -42
-17 -54 -19 -63 -9 -7 7 -31 59 -55 116 -25 61 -51 107 -62 113 -21 11 -84 4
-92 -10 -3 -5 19 -68 49 -141 31 -73 54 -134 52 -136 -4 -4 -98 -44 -103 -44
-3 0 -9 10 -13 23 -5 12 -66 161 -135 331 -69 170 -126 315 -126 321 0 9 110
58 200 88 34 12 79 6 111 -15z m4145 -68 c87 -39 160 -73 162 -75 9 -9 -32
-95 -45 -95 -7 0 -32 9 -55 21 -22 11 -44 17 -48 12 -4 -4 -63 -132 -130 -283
-67 -151 -123 -276 -124 -278 -5 -5 -106 41 -106 48 0 4 50 119 111 256 61
137 118 264 126 282 l14 33 -55 25 -54 25 21 49 c12 28 22 50 23 50 1 0 73
-32 160 -70z m-4564 -217 c124 -168 333 -455 341 -469 3 -6 -17 -22 -48 -37
l-53 -26 -38 55 c-20 29 -39 54 -41 54 -3 0 -31 -14 -62 -32 l-58 -32 18 -55
c11 -30 19 -59 19 -66 0 -12 -61 -45 -83 -45 -8 0 -56 131 -125 344 -62 188
-112 347 -112 352 0 7 106 67 146 83 1 1 44 -56 96 -126z m4931 37 c37 -19 67
-39 67 -45 0 -17 -231 -679 -239 -688 -10 -10 -101 33 -101 48 0 7 8 37 19 67
l19 55 -59 32 -60 33 -22 -28 c-12 -16 -31 -39 -43 -53 l-20 -23 -42 21 c-23
12 -42 26 -42 32 0 6 53 80 118 164 64 84 164 215 221 289 57 75 107 135 110
134 3 -2 36 -19 74 -38z m-2783 -32 c0 -28 -10 -77 -21 -109 -19 -50 -25 -59
-47 -59 -26 0 -26 4 -6 85 6 25 5 28 -15 22 -13 -3 -21 0 -21 8 0 7 -3 33 -6
58 l-7 46 54 3 c30 2 57 2 62 0 4 -2 7 -26 7 -54z m-2546 -142 c67 -51 113
-163 92 -223 -6 -20 -4 -23 21 -23 44 0 90 -35 133 -102 68 -104 76 -172 27
-229 -20 -24 -91 -75 -179 -127 l-36 -22 -133 212 c-74 117 -162 258 -196 313
-72 114 -76 97 39 166 123 75 171 82 232 35z m5632 -2 c24 -14 44 -27 44 -29
0 -9 -163 -264 -234 -367 l-80 -116 -29 16 c-16 9 -32 22 -37 27 -14 17 259
495 283 495 5 0 28 -12 53 -26z m-2446 -160 c581 -60 1083 -205 1589 -458 461
-231 826 -500 1206 -887 345 -352 587 -691 806 -1129 248 -496 391 -991 455
-1575 24 -218 24 -705 1 -925 -82 -755 -302 -1385 -692 -1985 -169 -261 -357
-488 -620 -750 -530 -530 -1109 -890 -1782 -1109 -955 -310 -2102 -283 -3040
73 -604 229 -1129 580 -1618 1083 -190 194 -269 286 -418 487 -547 732 -833
1577 -863 2546 -33 1049 302 2074 950 2910 198 255 510 570 771 776 376 298
825 544 1285 706 427 150 803 223 1330 257 108 7 498 -5 640 -20z m2116 -370
l44 -26 -27 -46 c-15 -26 -28 -49 -29 -51 -5 -7 -94 54 -94 64 0 12 48 85 56
85 3 0 25 -12 50 -26z m-4810 -8319 c48 -26 81 -51 79 -58 -59 -176 -280 -805
-286 -811 -10 -11 -119 44 -119 60 0 6 9 37 20 69 11 32 20 63 20 69 0 6 -31
28 -69 48 l-68 37 -48 -65 -47 -65 -47 27 c-25 15 -50 30 -55 35 -5 4 87 133
205 286 117 153 236 308 263 345 28 37 55 67 60 68 5 0 46 -20 92 -45z m4675
-133 c113 -209 213 -417 205 -430 -6 -11 -85 -47 -89 -41 -33 41 -231 384
-323 559 -13 24 -12 26 44 57 31 18 59 33 62 33 3 0 48 -80 101 -178z m-255
-149 c238 -360 365 -555 362 -557 -24 -12 -119 -56 -122 -56 -2 0 -23 29 -46
65 -23 36 -44 65 -46 65 -11 0 -144 -64 -144 -69 0 -4 9 -38 19 -76 11 -38 19
-70 18 -71 -13 -10 -110 -54 -113 -51 -6 6 -236 849 -232 851 16 11 166 75
175 76 6 0 64 -80 129 -177z m-4119 130 c38 -14 73 -30 79 -34 7 -6 0 -83 -23
-251 -18 -134 -31 -247 -30 -251 1 -4 44 94 96 218 51 124 95 225 96 225 20 0
115 -46 111 -54 -2 -6 -77 -186 -165 -400 -88 -214 -162 -391 -164 -393 -4 -4
-107 37 -122 48 -8 6 1 98 27 291 20 156 37 292 37 303 -1 25 -10 5 -129 -285
-51 -124 -96 -229 -100 -233 -4 -5 -32 2 -63 15 l-55 23 166 403 c91 221 167
402 169 402 1 0 33 -12 70 -27z m3756 -122 c9 -27 17 -53 17 -58 0 -5 -29 -20
-64 -32 l-65 -23 49 -136 c26 -76 74 -209 105 -297 31 -88 65 -184 76 -214 11
-29 18 -55 17 -56 -2 -1 -23 -9 -48 -17 -25 -9 -53 -19 -62 -23 -21 -8 -8 -41
-153 368 -62 175 -115 321 -118 323 -2 3 -28 -4 -56 -16 -28 -11 -58 -20 -65
-20 -15 0 -58 101 -47 112 8 9 362 136 381 137 10 1 22 -18 33 -48z m-3170
-92 c94 -29 173 -53 174 -54 4 -2 -33 -116 -38 -118 -2 0 -33 7 -67 17 -35 10
-65 16 -67 14 -1 -2 -50 -160 -109 -352 -58 -192 -108 -351 -109 -353 -2 -1
-33 7 -68 20 l-65 22 103 335 c56 184 104 344 107 356 5 19 -2 23 -59 39 -36
9 -65 22 -65 27 0 5 7 34 15 63 16 52 16 53 46 45 16 -5 107 -32 202 -61z
m2674 -40 c42 -16 73 -48 99 -104 35 -73 32 -81 -30 -99 -68 -20 -76 -20 -76
2 0 34 -38 82 -66 82 -63 0 -87 -48 -58 -119 20 -51 51 -77 161 -138 108 -60
165 -116 192 -188 43 -115 17 -223 -65 -271 -46 -27 -140 -42 -188 -30 -60 15
-129 110 -138 190 -3 27 0 30 47 42 71 19 73 19 86 -28 14 -54 35 -78 68 -78
40 0 71 26 71 61 0 76 -43 123 -182 201 -142 80 -201 163 -202 288 -1 72 19
118 65 152 57 43 156 60 216 37z m-2391 -35 c51 -13 64 -20 60 -33 -3 -9 -24
-97 -47 -196 -22 -99 -51 -225 -64 -280 -13 -55 -35 -154 -50 -220 -15 -66
-31 -123 -34 -127 -9 -11 -122 14 -128 28 -2 6 39 196 92 423 52 226 95 414
95 416 0 7 5 6 76 -11z m317 -63 c92 -15 169 -30 172 -33 7 -6 -5 -93 -15
-109 -7 -10 -28 -9 -110 5 -57 9 -105 15 -107 12 -8 -8 -43 -231 -38 -243 2
-7 12 -13 21 -13 10 0 46 -5 82 -11 l64 -11 -6 -37 c-4 -20 -9 -48 -12 -62
l-5 -26 -82 13 c-45 7 -85 10 -88 6 -3 -4 -18 -81 -33 -172 -15 -90 -28 -166
-30 -167 -5 -5 -113 9 -125 16 -7 5 11 137 59 430 39 232 70 425 70 427 0 6 3
6 183 -25z m1697 19 c0 -5 15 -92 34 -192 71 -377 116 -625 116 -640 0 -16
-119 -44 -131 -30 -8 9 -161 843 -156 849 5 5 86 20 115 22 12 1 22 -3 22 -9z
m-282 -54 c62 -32 97 -93 110 -192 5 -38 9 -70 7 -72 -1 -1 -31 -5 -67 -9
l-65 -6 -6 63 c-8 68 -18 87 -55 101 -24 9 -60 -3 -74 -25 -13 -18 -9 -82 17
-311 30 -265 29 -261 60 -281 31 -21 69 -12 91 21 14 21 14 36 6 102 -6 43
-10 79 -8 80 1 2 32 4 67 5 l64 3 9 -87 c14 -134 -10 -195 -91 -237 -123 -65
-262 -17 -298 102 -17 59 -65 466 -65 557 0 96 29 146 105 181 49 23 154 25
193 5z m-917 -24 c3 -4 20 -187 38 -407 18 -220 35 -415 38 -432 l5 -33 -70 0
-69 0 -7 31 c-3 17 -6 54 -6 81 0 30 -5 50 -12 53 -7 2 -45 5 -85 7 l-72 4
-17 -79 -17 -78 -61 7 c-34 4 -62 8 -64 9 -3 3 125 551 180 774 l21 83 96 -7
c53 -4 99 -10 102 -13z m452 -6 c61 -25 97 -85 111 -183 l6 -41 -60 -7 c-32
-4 -64 -4 -69 0 -6 3 -11 21 -11 38 0 47 -25 77 -63 77 -46 0 -59 -12 -64 -62
-8 -68 16 -109 122 -211 117 -112 148 -166 148 -265 1 -113 -32 -172 -115
-206 -71 -30 -180 -15 -231 32 -33 29 -56 87 -63 156 l-7 66 72 0 71 0 0 -50
c0 -59 24 -90 69 -90 44 0 61 23 61 83 0 66 -15 88 -128 197 -107 102 -133
149 -140 246 -7 113 25 180 102 215 49 22 143 25 189 5z m2524 -95 l32 -59
-58 -31 -59 -31 -31 54 c-17 29 -31 56 -31 60 0 5 100 66 110 66 3 0 19 -27
37 -59z"
      />
      <path
        d="M6186 11343 c-3 -21 -6 -64 -6 -95 l0 -58 38 0 c57 0 72 22 72 103 0
73 -11 87 -68 87 -26 0 -30 -4 -36 -37z"
      />
      <path
        d="M6170 10986 c0 -52 -3 -101 -6 -110 -5 -13 2 -16 44 -16 67 0 82 20
82 112 0 83 -18 108 -80 108 l-40 0 0 -94z"
      />
      <path
        d="M5381 11200 c-1 -63 -4 -145 -7 -181 l-7 -67 49 5 c27 3 51 8 54 10
5 4 -65 288 -81 328 -4 12 -8 -29 -8 -95z"
      />
      <path
        d="M6640 11115 c-24 -85 -42 -157 -39 -159 2 -2 25 -6 52 -9 l47 -7 0
160 c0 87 -4 161 -8 164 -5 3 -28 -64 -52 -149z"
      />
      <path
        d="M7090 11171 c-12 -53 -23 -101 -25 -108 -5 -15 54 -28 83 -19 22 7
35 35 52 113 15 65 4 87 -49 100 l-40 11 -21 -97z"
      />
      <path
        d="M3943 10978 c-13 -6 -23 -14 -23 -18 0 -4 14 -40 31 -81 17 -41 35
-84 40 -96 8 -23 9 -23 44 -6 47 22 53 50 26 121 -35 89 -61 107 -118 80z"
      />
      <path
        d="M3563 10728 c2 -7 26 -78 52 -158 27 -80 49 -146 51 -148 2 -3 83 35
92 43 4 3 -188 275 -195 275 -3 0 -3 -6 0 -12z"
      />
      <path
        d="M8434 10608 c-85 -115 -124 -171 -124 -180 0 -8 80 -52 84 -46 7 8
115 312 112 315 -2 2 -34 -38 -72 -89z"
      />
      <path
        d="M3128 10560 c-18 -10 -32 -23 -30 -30 2 -8 68 -120 88 -148 1 -2 16
4 32 12 51 26 53 65 5 137 -30 45 -53 52 -95 29z"
      />
      <path
        d="M3280 10303 c-14 -9 -26 -17 -28 -19 -3 -2 94 -161 109 -178 10 -12
77 31 84 54 7 22 -22 83 -60 129 -31 35 -67 40 -105 14z"
      />
      <path
        d="M3531 1494 c-68 -91 -121 -167 -120 -168 2 -2 28 -16 57 -30 38 -20
54 -23 57 -14 2 7 33 94 69 192 36 99 64 181 63 183 -2 1 -59 -72 -126 -163z"
      />
      <path
        d="M8033 1485 c59 -204 108 -369 111 -372 6 -6 106 38 106 47 0 9 -197
319 -212 335 -7 7 -8 3 -5 -10z"
      />
      <path
        d="M5618 1065 c-14 -40 -88 -378 -84 -382 2 -2 29 -7 60 -10 l56 -6 -1
59 c-2 111 -25 359 -31 339z"
      />
    </g>
  </svg>
);

const BaristaLogoInner = () => (
  <svg
    version="1.0"
    xmlns="http://www.w3.org/2000/svg"
    width="480"
    height="480"
    viewBox="0 0 1200.000000 1200.000000"
    preserveAspectRatio="xMidYMid meet"
  >
    <g
      transform="translate(0.000000,1200.000000) scale(0.100000,-0.100000)"
      fill="#000"
      stroke="#000"
    >
      <path
        d="M5860 9603 c-498 -54 -1056 -370 -1419 -803 -226 -269 -342 -440
  -480 -703 -424 -813 -592 -1805 -475 -2816 67 -587 270 -1197 553 -1665 97
  -161 278 -405 386 -522 102 -110 316 -291 458 -386 133 -90 457 -242 475 -223
  3 2 -18 87 -47 187 -89 318 -116 477 -130 768 -24 524 65 1070 272 1650 90
  254 172 440 366 830 207 417 275 576 374 872 148 445 223 859 234 1298 11 413
  -36 784 -144 1140 -34 114 -98 291 -124 346 l-14 29 -125 1 c-69 1 -141 -1
  -160 -3z"
      ></path>
    </g>
    <g
      transform="translate(0.000000,1200.000000) scale(0.100000,-0.100000)"
      fill="#ff0000"
      stroke="#ff0000"
    >
      <path
        d="M6600 9526 c0 -3 16 -58 36 -123 204 -673 236 -1355 99 -2082 -95
  -502 -237 -884 -628 -1691 -181 -375 -277 -613 -366 -905 -251 -832 -234
  -1610 48 -2240 18 -38 39 -76 48 -82 23 -18 195 -17 337 2 220 29 430 95 636
  200 116 60 368 224 435 283 222 198 360 349 524 577 427 589 700 1381 772
  2240 18 211 6 752 -21 980 -74 632 -289 1275 -581 1737 -237 376 -501 656
  -824 872 -146 98 -515 264 -515 232z"
      ></path>
    </g>
  </svg>
);
